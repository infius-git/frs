<div [hidden]="!openTable" class="mat-elevation-z8 visitor-mat-tbl-report">
    <span id="tbl-expand" (click)="closeTabularReport()">&times;</span>
    <!-- <table datatable [dtOptions]="dtOptions" class="row-border hover">
        <thead>
            <tr>
                <th *ngFor="let filterCol of displayedColumns">{{filterCol}}</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let element of dataSource">
                <td *ngFor="let filterCol of displayedColumns">
                    <span *ngIf="filterCol=='vehicles'"><span *ngFor="let vehicle of element.vehicles">{{vehicle.vehicleNo}}</span></span>
                    <span *ngIf="filterCol!='vehicles' && filterCol!='otherGuests'">{{element[filterCol]}}</span>
                    <span *ngIf="filterCol=='otherGuests'"><span *ngFor="let otherguest of element.otherGuests">{{otherguest.name}}</span></span>
                </td>
            </tr>

        </tbody>
    </table> -->



    <table *ngIf="openTable" datatable [dtOptions]="dtOptions" class="row-border hover">
        <thead>
            <tr>
                <th *ngFor="let filterCol of displayedColumns">{{filterCol}}</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let element of dataSource" (click)="openGuestReport(element)" style="vertical-align: top;">
                <td style="text-align: left !important"><img alt="" [attr.src]="element.guestThumbnailPic"></td>
                <td style="text-align: left !important;">Name: {{element.name}}<br>Address: {{element.fromAddress?element.fromAddress:"No Address"}}<br>Mobile: {{element.mobile}}<br>Purpose Of Visit: <br>Duration: {{element.expectedIn | date: "medium"}} to<br> {{element.expectedOut | date: "medium"}}
                </td>
                <td style="text-align: left !important;">Name: {{element.hostName}}<br>Address: {{element.hostHouseNo?element.hostHouseNo:"No Address"}}<br>Mobile: {{element.hostActiveMobileNo}}
                </td>
                <td>Hardware</td>
                <td>{{element.expectedIn | date: "medium"}}</td>
                <td>{{element.expectedOut | date: "medium"}}</td>
                <td><span *ngFor="let vehicle of element.vehicles">{{vehicle.vehicleNo}}<br></span></td>
                <td><span *ngFor="let otherGuest of element.otherGuests">{{otherGuest.name}}<br></span></td>
            </tr>

        </tbody>
    </table>


    <!-- <table mat-table [dataSource]="sortedData" matSort (matSortChange)="sortData($event)"> -->

    <!-- <mat-form-field class="filter" floatLabel="never">
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
        </mat-form-field> -->

    <!--- Note that these columns can be defined in any order.
                          The actual rendered columns are set as a property on the row definition" -->
    <!-- Visitor Id Column -->
    <!-- <ng-container stlye="display: flex;">
            <ng-container matColumnDef="visitorId">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Visitor Id</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    <a href="#">{{row.visitorId}} </a>
                </td>
            </ng-container> -->
    <!-- Visitor Information Column -->
    <!-- <ng-container matColumnDef="visitorInfo">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Visitor Info</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{'Name: ' + row.name}}
                    <br> {{'Company Name: Infius Synergy'}}
                    <br> {{'Address: ' + row.fromAddress}}
                    <br> {{'Mobile No: ' + row.mobile}}
                    <br> {{'Purpose of Visit: ' + row.mobile}}
                    <br> {{'Visit Schedule: ' + (row.expectedIn | date:'medium') +'-' + (row.expectedOut | date:'medium')}}
                </td>
            </ng-container> -->
    <!-- Invitee Information Column -->
    <!-- <ng-container matColumnDef="inviteeInfo">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Invitee Info</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{'Name: ' + row.name}}
                    <br> {{'Company Name: Infius Synergy'}}
                    <br> {{'Address: ' + row.fromAddress}}
                    <br> {{'Mobile No: ' + row.mobile}}
                    <br> {{'Purpose of Visit: ' + row.mobile}}
                    <br> {{'Visit Schedule: ' + (row.expectedIn | date:'medium') +'-' + (row.expectedOut | date:'medium')}}
                </td>
            </ng-container> -->
    <!-- Hardware Carried Information Column -->
    <!-- <ng-container matColumnDef="hardwareCarried">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Hardware Info</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{' XYZNNNNN ' }}
                </td>
            </ng-container> -->
    <!-- Actual Time In Information Column -->
    <!-- <ng-container matColumnDef="actualInTime">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">In Time</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{(!!row.actualInTime && row.actualInTime !== undefined) ? (row.actualInTime | date: 'medium') : ' Not Yet Arrived! '}}
                </td>
            </ng-container> -->
    <!-- Actual Time Out Information Column -->
    <!-- <ng-container matColumnDef="actualOutTime">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Out Time</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{(!!row.actualOutTime && row.actualOutTime !== undefined) ? (row.actualOutTime | date: 'medium') : ' Not Checked Out Yet! '}}
                </td>
            </ng-container> -->
    <!-- Vehicles Information Column -->
    <!-- <ng-container matColumnDef="vehicles">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Vehicles</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{(!!row.vehicles && row.vehicles !== undefined) ? row.vehicles[0].vehicleNo : ' No Vehicles.'}}
                </td>
            </ng-container> -->
    <!-- Additional Guests Information Column -->
    <!-- <ng-container matColumnDef="otherGuests">
                <th mat-header-cell *matHeaderCellDef style="width: 380px;">Add. Guest Info</th>
                <td mat-cell *matCellDef="let row" style="padding-left: 15px; width: 2500px;">
                    {{(!!row.otherGuests && row.otherGuests !== undefined) ? row.otherGuests[0].name : ' No add. guests.'}}
                </td>
            </ng-container> -->
    <!-- </ng-container> -->
    <!-- <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayColumns;"></tr>
    </table>

    <mat-paginator [length]="sortedData!==undefined && sortedData.paginator!==undefined? sortedData.paginator.length : 25" [pageSize]="sortedData!==undefined && sortedData.paginator!==undefined? sortedData.paginator.pageSize : 5" [pageSizeOptions]="sortedData!==undefined && sortedData.paginator!==undefined? sortedData.paginator.pageSizeOptions : [1, 5, 10, 15, 20, 25]"
        (page)="updatePage($event)">
    </mat-paginator> -->
</div>

<!--------------------- Guest PopUP for report with qr code--------------------------------------->

<div *ngIf="openPopUp" class="white_content_visitor" style="display: block;">
    <button type="button" class="close" (click)="closePopUpReport()" data-dismiss="popover" aria-hidden="true">&times;</button>
    <h3>Flat NUMBER : <span id="flatno">{{!!selectedVisitor ? selectedVisitor.hostHouseNo : '-'}}</span></h3>
    <div class="popup_content">
        <div class="row">
            <div class="col-md-6">
                <div class="visitormaintitle">
                    Host Details
                </div>
                <div class="visitor_profile ml-0"><span><img alt="" [attr.src]="!!selectedVisitor ? selectedVisitor.hostPic : 'No Data Available'"></span></div>
                <div class="visitor_details">
                    <h4>{{!!selectedVisitor ? selectedVisitor.hostName : '-'}}</h4>
                    <p>Contact Number : {{!!selectedVisitor ? selectedVisitor.hostActiveMobileNo : '-'}}</p>
                </div>
                <div style="clear:both;"></div>
                <div class="visitor_detailstbl">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTrr_6SZl1Az-DPPQrPoJqxl8H_rH2-xk8C7gzxoduRAHoFMTBQ" class="qrimage">
                </div>
                <div style="clear: both"></div>
            </div>
            <div class="col-md-6">
                <div class="visitormaintitle">
                    Guest Details
                </div>
                <div class="visitor_profile ml-0"><span><img alt="" [attr.src]="!!selectedVisitor ? selectedVisitor.guestPic : 'No Data Available'"></span></div>
                <div class="visitor_details">
                    <h4>{{!!selectedVisitor ? selectedVisitor.name: '-'}}</h4>
                    <!-- <h4>{{selectedVisitor.name}}</h4> -->
                    <p>Contact Number : {{!!selectedVisitor && !!selectedVisitor.mobile ? ('+91'+selectedVisitor.mobile) : '-'}}</p>
                </div>
                <div style="clear:both;"></div>
                <div class="visitor_detailstbl">
                    <table class="table">
                        <tr>
                            <td>Visitor Info</td>
                            <td>
                                Name: {{selectedVisitor.name}}<br> Address: {{selectedVisitor.fromAddress}}<br> mobile Number: {{selectedVisitor.mobile}}<br>
                            </td>
                        </tr>
                        <tr>
                            <td>Visitor Info</td>
                            <td>
                                Name: {{selectedVisitor.hostName}}<br> Address: {{selectedVisitor.hostHouseNo}}<br> mobile Number: {{selectedVisitor.hostActiveMobileNo}}<br>
                            </td>
                        </tr>
                        <tr>
                            <td>IN TIME</td>
                            <td>{{selectedVisitor.expectedIn}}</td>
                        </tr>
                        <tr>
                            <td>OUT TIME</td>
                            <td>{{selectedVisitor.expectedOut}}</td>
                        </tr>
                        <tr>
                            <td>VEHICLES DETAILS</td>
                            <td><span *ngFor="let vehicle of selectedVisitor.vehicles">Vehicle No.: {{(!!selectedVisitor.vehicles)?vehicle.vehicleNo:'-'}}<br>Parking Slot: {{(!!selectedVisitor.vehicles)?vehicle.parkingSlot:'-'}}</span></td>
                        </tr>
                        <tr>
                            <td>Historical breach info</td>
                            <td>
                                Interzonal: None<br> Blacklisted: None<br> Disputed: None<br> Classified: None<br>
                            </td>
                        </tr>
                        <tr>
                            <td>Additional Guest Info
                            </td>
                            <td>Count: {{selectedVisitor.otherGuests.length}}<br><span *ngFor="let otherGuest of selectedVisitor.otherGuests">Name: {{otherGuest.name}}<br></span></td>
                        </tr>

                    </table>
                </div>
                <div style="clear: both"></div>
            </div>
        </div>

    </div>
</div>
<!--________________________________-->

<div _ngcontent-fil-c3="" class="black_overlay" id="visitorfade"></div>